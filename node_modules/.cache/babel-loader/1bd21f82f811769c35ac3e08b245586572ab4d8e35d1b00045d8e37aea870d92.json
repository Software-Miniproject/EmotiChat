{"ast":null,"code":"import _slicedToArray from\"/Users/trevorchan/Desktop/Senior Project/mini/EmotiChat/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useContext,createContext,useEffect,useState}from\"react\";import{GoogleAuthProvider,signInWithRedirect,signOut,onAuthStateChanged}from\"firebase/auth\";import{auth}from'../firebase';import{storeUserData}from'../components/StoreUser';import{jsx as _jsx}from\"react/jsx-runtime\";var AuthContext=/*#__PURE__*/createContext();export var AuthContextProvider=function AuthContextProvider(_ref){var children=_ref.children;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var googleSignIn=function googleSignIn(){var provider=new GoogleAuthProvider();signInWithRedirect(auth,provider);};var logOut=function logOut(){signOut(auth);};useEffect(function(){var unsubscribe=onAuthStateChanged(auth,function(currentUser){setUser(currentUser);console.log('User',currentUser);if(currentUser!=null){var uid=currentUser.uid,email=currentUser.email,displayName=currentUser.displayName,photoURL=currentUser.photoURL;//console.log('User data:', { uid, email, displayName });\nstoreUserData(uid,email,displayName,photoURL);}});return function(){unsubscribe();};},[]);// Include setUser in the context\nvar contextValue={googleSignIn:googleSignIn,logOut:logOut,user:user,setUser:setUser// Add this line\n};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:contextValue,children:children});};export var UserAuth=function UserAuth(){return useContext(AuthContext);};","map":{"version":3,"names":["useContext","createContext","useEffect","useState","GoogleAuthProvider","signInWithRedirect","signOut","onAuthStateChanged","auth","storeUserData","jsx","_jsx","AuthContext","AuthContextProvider","_ref","children","_useState","_useState2","_slicedToArray","user","setUser","googleSignIn","provider","logOut","unsubscribe","currentUser","console","log","uid","email","displayName","photoURL","contextValue","Provider","value","UserAuth"],"sources":["/Users/trevorchan/Desktop/Senior Project/mini/EmotiChat/src/context/AuthContext.js"],"sourcesContent":["import { useContext, createContext, useEffect, useState } from \"react\";\nimport { GoogleAuthProvider, signInWithRedirect, signOut, onAuthStateChanged } from \"firebase/auth\";\nimport { auth } from '../firebase';\nimport { storeUserData } from '../components/StoreUser';\n\nconst AuthContext = createContext();\n\nexport const AuthContextProvider = ({ children }) => {\n\n    const [user, setUser] = useState({});\n\n    const googleSignIn = () => {\n        const provider = new GoogleAuthProvider();\n        signInWithRedirect(auth, provider);\n    };\n\n    const logOut = () => {\n        signOut(auth);\n    };\n\n    useEffect(() => {\n        const unsubscribe = onAuthStateChanged(auth, (currentUser) => {\n            setUser(currentUser);\n            console.log('User', currentUser);\n            if (currentUser != null) {\n                const { uid, email, displayName, photoURL } = currentUser;\n                //console.log('User data:', { uid, email, displayName });\n                storeUserData(uid, email, displayName, photoURL);\n            }\n\n        });\n        return () => {\n            unsubscribe();\n        };\n    }, []);\n\n    // Include setUser in the context\n    const contextValue = {\n        googleSignIn,\n        logOut,\n        user,\n        setUser, // Add this line\n    };\n\n    return (\n        <AuthContext.Provider value={contextValue}>\n            {children}\n        </AuthContext.Provider>\n    );\n};\n\nexport const UserAuth = () => {\n    return useContext(AuthContext);\n};\n"],"mappings":"6IAAA,OAASA,UAAU,CAAEC,aAAa,CAAEC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CACtE,OAASC,kBAAkB,CAAEC,kBAAkB,CAAEC,OAAO,CAAEC,kBAAkB,KAAQ,eAAe,CACnG,OAASC,IAAI,KAAQ,aAAa,CAClC,OAASC,aAAa,KAAQ,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAExD,GAAM,CAAAC,WAAW,cAAGX,aAAa,CAAC,CAAC,CAEnC,MAAO,IAAM,CAAAY,mBAAmB,CAAG,QAAtB,CAAAA,mBAAmBA,CAAAC,IAAA,CAAqB,IAAf,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CAE1C,IAAAC,SAAA,CAAwBb,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAAc,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA7BG,IAAI,CAAAF,UAAA,IAAEG,OAAO,CAAAH,UAAA,IAEpB,GAAM,CAAAI,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAA,CAAS,CACvB,GAAM,CAAAC,QAAQ,CAAG,GAAI,CAAAlB,kBAAkB,CAAC,CAAC,CACzCC,kBAAkB,CAACG,IAAI,CAAEc,QAAQ,CAAC,CACtC,CAAC,CAED,GAAM,CAAAC,MAAM,CAAG,QAAT,CAAAA,MAAMA,CAAA,CAAS,CACjBjB,OAAO,CAACE,IAAI,CAAC,CACjB,CAAC,CAEDN,SAAS,CAAC,UAAM,CACZ,GAAM,CAAAsB,WAAW,CAAGjB,kBAAkB,CAACC,IAAI,CAAE,SAACiB,WAAW,CAAK,CAC1DL,OAAO,CAACK,WAAW,CAAC,CACpBC,OAAO,CAACC,GAAG,CAAC,MAAM,CAAEF,WAAW,CAAC,CAChC,GAAIA,WAAW,EAAI,IAAI,CAAE,CACrB,GAAQ,CAAAG,GAAG,CAAmCH,WAAW,CAAjDG,GAAG,CAAEC,KAAK,CAA4BJ,WAAW,CAA5CI,KAAK,CAAEC,WAAW,CAAeL,WAAW,CAArCK,WAAW,CAAEC,QAAQ,CAAKN,WAAW,CAAxBM,QAAQ,CACzC;AACAtB,aAAa,CAACmB,GAAG,CAAEC,KAAK,CAAEC,WAAW,CAAEC,QAAQ,CAAC,CACpD,CAEJ,CAAC,CAAC,CACF,MAAO,WAAM,CACTP,WAAW,CAAC,CAAC,CACjB,CAAC,CACL,CAAC,CAAE,EAAE,CAAC,CAEN;AACA,GAAM,CAAAQ,YAAY,CAAG,CACjBX,YAAY,CAAZA,YAAY,CACZE,MAAM,CAANA,MAAM,CACNJ,IAAI,CAAJA,IAAI,CACJC,OAAO,CAAPA,OAAS;AACb,CAAC,CAED,mBACIT,IAAA,CAACC,WAAW,CAACqB,QAAQ,EAACC,KAAK,CAAEF,YAAa,CAAAjB,QAAA,CACrCA,QAAQ,CACS,CAAC,CAE/B,CAAC,CAED,MAAO,IAAM,CAAAoB,QAAQ,CAAG,QAAX,CAAAA,QAAQA,CAAA,CAAS,CAC1B,MAAO,CAAAnC,UAAU,CAACY,WAAW,CAAC,CAClC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}