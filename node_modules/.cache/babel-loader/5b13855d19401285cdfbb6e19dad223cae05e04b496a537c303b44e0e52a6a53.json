{"ast":null,"code":"import _regeneratorRuntime from\"/Users/trevorchan/Desktop/Senior Project/mini/EmotiChat/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/trevorchan/Desktop/Senior Project/mini/EmotiChat/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/trevorchan/Desktop/Senior Project/mini/EmotiChat/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useCallback}from'react';import{Link}from\"react-router-dom\";import{UserAuth}from'../context/AuthContext';import{doc,getDoc}from'firebase/firestore';import{db}from'../firebase';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Account=function Account(){var _ref2;var _UserAuth=UserAuth(),logOut=_UserAuth.logOut,user=_UserAuth.user;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var fetchUserData=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var uid,userRef,userDoc,userData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(user!==null)){_context.next=7;break;}uid=user.uid;userRef=doc(db,'users',uid);_context.next=5;return getDoc(userRef);case 5:userDoc=_context.sent;if(userDoc.exists()){userData=userDoc.data();setUsername(userData.username);}else{console.log('User document does not exist.');}case 7:case\"end\":return _context.stop();}},_callee);})),[user]);useEffect(function(){fetchUserData();},[fetchUserData,user]);var handleSignOut=function handleSignOut(){return(_ref2=_ref2||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return logOut();case 3:_context2.next=8;break;case 5:_context2.prev=5;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 8:case\"end\":return _context2.stop();}},_callee2,null,[[0,5]]);}))).apply(this,arguments);};return/*#__PURE__*/_jsxs(\"div\",{className:\"account-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Account\"}),(user===null||user===void 0?void 0:user.photoURL)&&/*#__PURE__*/_jsx(\"img\",{src:user.photoURL,alt:\"\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Welcome, \",user===null||user===void 0?void 0:user.displayName]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Username: \",username,\" \",/*#__PURE__*/_jsx(Link,{to:\"/username\",children:\"Change\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"You are signed in using your Google account: \",user===null||user===void 0?void 0:user.email]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSignOut,className:\"account-signout-btn\",children:\"Sign Out\"})]});};export default Account;","map":{"version":3,"names":["React","useState","useEffect","useCallback","Link","UserAuth","doc","getDoc","db","jsx","_jsx","jsxs","_jsxs","Account","_ref2","_UserAuth","logOut","user","_useState","_useState2","_slicedToArray","username","setUsername","fetchUserData","_asyncToGenerator","_regeneratorRuntime","mark","_callee","uid","userRef","userDoc","userData","wrap","_callee$","_context","prev","next","sent","exists","data","console","log","stop","handleSignOut","_callee2","_callee2$","_context2","t0","apply","arguments","className","children","photoURL","src","alt","displayName","to","email","onClick"],"sources":["/Users/trevorchan/Desktop/Senior Project/mini/EmotiChat/src/pages/account.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { Link } from \"react-router-dom\";\nimport { UserAuth } from '../context/AuthContext';\nimport { doc, getDoc } from 'firebase/firestore';\nimport { db } from '../firebase';\n\nconst Account = () => {\n    const { logOut, user } = UserAuth();\n    const [username, setUsername] = useState('');\n\n    const fetchUserData = useCallback(async () => {\n        if (user !== null) {\n            const uid = user.uid;\n            const userRef = doc(db, 'users', uid);\n            const userDoc = await getDoc(userRef);\n\n            if (userDoc.exists()) {\n                const userData = userDoc.data();\n                setUsername(userData.username);\n            } else {\n                console.log('User document does not exist.');\n            }\n        }\n    }, [user]);\n\n    useEffect(() => {\n        fetchUserData();\n    }, [fetchUserData, user]);\n\n    const handleSignOut = async () => {\n        try {\n            await logOut();\n        } catch (error) {\n            console.log(error);\n        }\n    };\n\n    return (\n        <div className='account-container'>\n          <h1>Account</h1>\n          {user?.photoURL && <img src={user.photoURL} alt=\"\" />}\n          <div>\n            <p>Welcome, {user?.displayName}</p>\n            <p>Username: {username} <Link to='/username'>Change</Link></p>\n            <p>You are signed in using your Google account: {user?.email}</p>\n          </div>\n          <button onClick={handleSignOut} className=\"account-signout-btn\">Sign Out</button>\n        </div>\n      );\n      \n};\n\nexport default Account;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}