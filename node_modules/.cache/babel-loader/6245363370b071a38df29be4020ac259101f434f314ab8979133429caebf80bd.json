{"ast":null,"code":"import _regeneratorRuntime from\"/Users/trevorchan/Desktop/Senior Project/mini/EmotiChat/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/trevorchan/Desktop/Senior Project/mini/EmotiChat/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/trevorchan/Desktop/Senior Project/mini/EmotiChat/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import{UserAuth}from'../context/AuthContext';import{doc,getDoc}from'firebase/firestore';import{db}from'../firebase';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Navbar=function Navbar(){var _ref2;var _UserAuth=UserAuth(),user=_UserAuth.user,logOut=_UserAuth.logOut;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];useEffect(function(){var _ref;var fetchUsername=function fetchUsername(){return(_ref=_ref||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var userDocRef,userDocSnapshot,userData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;if(!user){_context.next=7;break;}userDocRef=doc(db,'users',user.uid);_context.next=5;return getDoc(userDocRef);case 5:userDocSnapshot=_context.sent;if(userDocSnapshot.exists()){userData=userDocSnapshot.data();setUsername(userData.username);}case 7:_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.error('Error fetching username:',_context.t0);case 12:case\"end\":return _context.stop();}},_callee,null,[[0,9]]);}))).apply(this,arguments);};fetchUsername();},[user]);var handleSignOut=function handleSignOut(){return(_ref2=_ref2||_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return logOut();case 3:_context2.next=8;break;case 5:_context2.prev=5;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 8:case\"end\":return _context2.stop();}},_callee2,null,[[0,5]]);}))).apply(this,arguments);};return/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"navbar-brand\",children:\"EmotiChat\"}),/*#__PURE__*/_jsx(\"div\",{className:\"navbar-links\",children:user!==null&&user!==void 0&&user.displayName?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"navbar-username\",children:[\"Signed in as \",username]}),/*#__PURE__*/_jsx(Link,{to:\"/search\",className:\"navbar-link\",children:\" Search \"}),/*#__PURE__*/_jsx(Link,{to:\"/account\",className:\"navbar-link\",children:\"My Account\"}),/*#__PURE__*/_jsx(Link,{onClick:handleSignOut,className:\"navbar-link\",children:\"Sign Out\"})]}):/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"navbar-link\",children:\"Sign In\"})})]});};export default Navbar;","map":{"version":3,"names":["React","useState","useEffect","Link","UserAuth","doc","getDoc","db","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Navbar","_ref2","_UserAuth","user","logOut","_useState","_useState2","_slicedToArray","username","setUsername","_ref","fetchUsername","_asyncToGenerator","_regeneratorRuntime","mark","_callee","userDocRef","userDocSnapshot","userData","wrap","_callee$","_context","prev","next","uid","sent","exists","data","t0","console","error","stop","apply","arguments","handleSignOut","_callee2","_callee2$","_context2","log","className","children","to","displayName","onClick"],"sources":["/Users/trevorchan/Desktop/Senior Project/mini/EmotiChat/src/components/Navbar.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { UserAuth } from '../context/AuthContext';\nimport { doc, getDoc } from 'firebase/firestore';\nimport { db } from '../firebase';\n\nconst Navbar = () => {\n    const { user, logOut } = UserAuth();\n    const [username, setUsername] = useState('');\n\n    useEffect(() => {\n        const fetchUsername = async () => {\n            try {\n                // Check if user is authenticated\n                if (user) {\n                    const userDocRef = doc(db, 'users', user.uid);\n                    const userDocSnapshot = await getDoc(userDocRef);\n\n\n                    if (userDocSnapshot.exists()) {\n                        const userData = userDocSnapshot.data();\n                        setUsername(userData.username);\n                    }\n                }\n            } catch (error) {\n                console.error('Error fetching username:', error);\n            }\n        };\n\n        fetchUsername();\n    }, [user]);\n\n    const handleSignOut = async () => {\n        try {\n            await logOut();\n        } catch (error) {\n            console.log(error);\n        }\n\n    }\n  \n    return (\n        <nav className=\"navbar\">\n  <Link to=\"/\" className=\"navbar-brand\">\n    EmotiChat\n  </Link>\n  <div className=\"navbar-links\">\n    {user?.displayName ? (\n      <>\n        <p className=\"navbar-username\">Signed in as {username}</p>\n        <Link to='/search' className=\"navbar-link\"> Search </Link>\n        <Link to='/account' className=\"navbar-link\">My Account</Link>\n        <Link onClick={handleSignOut} className=\"navbar-link\">Sign Out</Link>\n      </>\n    ) : (\n      <Link to='/login' className=\"navbar-link\">Sign In</Link>\n    )}\n  </div>\n</nav>\n\n    );\n};\n\nexport default Navbar;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}